{% extends 'global/base.html' %}

{% block title %}Carrinho{% endblock %}

{% block content %} 
<div class="main-content main-content-list container">
    {% for item in produtos_no_carrinho %}
        <div class="product product-list-item">
            <div class="product-cover">        
                <img src="{{ item.produto.imagem.url }}" alt="" />
            </div>
        
            <div class="product-title-container">
                <h2 class="product-title">
                    <p>{{ item.produto.nome }}</p>
                </h2>
            </div>
            
            <div class="product-value-container">
                <div class="product-servings">
                    <h3 class="product-meta-title">
                        <i class="fas fa-money-bill"></i> Pre√ßo
                        <div class="product-meta-text">R${{ item.produto.preco }}</div>
                    </h3>
                    <h3 class="product-meta-title">
                        <i class="fas fa-solid fa-layer-group"></i> Quantidades 
                        <div class="product-meta-text">{{ item.quantidade }} un.</div>
                    </h3>
                    <h3 class="product-meta-title">
                        <i class="fas fa-solid fa-square"></i> Total
                        <div class="product-meta-text">R${{ item.valor }}</div>
                    </h3>
                </div>
            </div>   
            
            <div class="checkout-section out-product">
                <div class="button-group">
                    <form action="{% url 'remove_do_carrinho' item.produto.id %}" method="GET">
                        {% csrf_token %}
                        <button type="submit"><i class="fas fa-solid fa-minus"></i> Remover Item</button>
                    </form>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

<div class="checkout-section">
    <h1>
        <i class="fas fa-solid fa-cart-plus"></i> Seu Carrinho: {{ itens }} Itens R${{ valor_total }}
    </h1>
    <div class="button-group">
        <div class="add-product">
            <form action="{% url 'lista_produtos' %}" method="GET">
                {% csrf_token %}
                <button type="submit"><i class="fas fa-solid fa-cart-plus"></i> Continuar Comprando</button>
            </form>
        </div>
        <div class="finish-buy">
            <form action="{% url 'finalizar_compra' %}" method="GET">
                {% csrf_token %}
                <button type="submit"><i class="fas fa-solid fa-check"></i> Finalizar Compra</button>
            </form>
        </div>
    </div>
</div>


{% endblock %}

